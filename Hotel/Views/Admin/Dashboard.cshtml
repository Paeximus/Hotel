@model Hotel.Models.ViewModels.DashboardViewModel
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

				<div class="page-header">
					<div class="row">
						<div class="col-sm-12 mt-5">
							<h3 class="page-title mt-3">Hello @Model.UserName</h3>
							<ul class="breadcrumb">
								<li class="breadcrumb-item active">Dashboard</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill">
							<div class="card-body">
								<div class="dash-widget-header">
									<div>
										<h3 class="card_widget_header">@Model.TotalReservations</h3>
										<h6 class="text-muted">Total Booking</h6>
									</div>
									<div class="ml-auto mt-md-3 mt-lg-0">
										<span class="opacity-7 text-muted">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#009688" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-plus">
												<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
												<circle cx="8.5" cy="7" r="4"></circle>
												<line x1="20" y1="8" x2="20" y2="14"></line>
												<line x1="23" y1="11" x2="17" y2="11"></line>
											</svg>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill">
							<div class="card-body">
								<div class="dash-widget-header">
									<div>
										<h3 class="card_widget_header">@Model.TotalRooms</h3>
										<h6 class="text-muted">Available Rooms</h6>
									</div>
									<div class="ml-auto mt-md-3 mt-lg-0">
										<span class="opacity-7 text-muted">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#009688" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-dollar-sign">
												<line x1="12" y1="1" x2="12" y2="23"></line>
												<path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
											</svg>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill">
							<div class="card-body">
								<div class="dash-widget-header">
									<div>
										<h3 class="card_widget_header">@Model.TotalUsers</h3>
										<h6 class="text-muted">Users</h6>
									</div>
									<div class="ml-auto mt-md-3 mt-lg-0">
										<span class="opacity-7 text-muted">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#009688" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-plus">
												<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z">
												</path>
												<polyline points="14 2 14 8 20 8"></polyline>
												<line x1="12" y1="18" x2="12" y2="12"></line>
												<line x1="9" y1="15" x2="15" y2="15"></line>
											</svg>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill">
							<div class="card-body">
								<div class="dash-widget-header">
									<div>
										<h3 class="card_widget_header">364</h3>
										<h6 class="text-muted">Collections</h6>
									</div>
									<div class="ml-auto mt-md-3 mt-lg-0">
										<span class="opacity-7 text-muted">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#009688" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe">
												<circle cx="12" cy="12" r="10"></circle>
												<line x1="2" y1="12" x2="22" y2="12"></line>
												<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
												</path>
											</svg>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 col-lg-6">
						<div class="card card-chart">
							<div class="card-header">
								<h4 class="card-title">VISITORS</h4>
							</div>
							<div class="card-body">
								<canvas id="line-charts"></canvas>
							</div>
						</div>
					</div>
					<div class="col-md-12 col-lg-6">
						<div class="card card-chart">
							<div class="card-header">
								<h4 class="card-title">ROOMS BOOKED</h4>
							</div>
							<div class="card-body">
								<canvas id="donut-charts"></canvas>
							</div>
						</div>
					</div>
				</div>
				
<script>
	document.addEventListener('DOMContentLoaded', function() {
		var roomTypes = @Html.Raw(Json.Serialize(Model.RoomTypes));
		var roomCounts = @Html.Raw(Json.Serialize(Model.RoomTypeCounts));
		var days = @Html.Raw(Json.Serialize(Model.DaysOfWeek));
		var reservationsPerDay = @Html.Raw(Json.Serialize(Model.ReservationsPerDay));

		// Debug: Log data to console
		console.log('Room Types:', roomTypes);
		console.log('Room Counts:', roomCounts);
		console.log('Days:', days);
		console.log('Reservations Per Day:', reservationsPerDay);

		// Donut chart for Room Types
		var donutCanvas = document.getElementById('donut-charts');
		if (donutCanvas && roomTypes.length > 0) {
			var ctxRoomTypes = donutCanvas.getContext('2d');
			new Chart(ctxRoomTypes, {
				type: 'doughnut',
				data: {
					labels: roomTypes,
					datasets: [{
						label: 'Rooms Booked',
						data: roomCounts,
						backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF','#FF9F40'],
						borderWidth: 2,
						borderColor: '#fff'
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: true,
					plugins: {
						legend: {
							position: 'bottom'
						}
					}
				}
			});
		} else {
			console.error('Donut chart canvas not found or no data available');
		}

		// Line chart for Reservations per Day of Week
		var lineCanvas = document.getElementById('line-charts');
		if (lineCanvas && days.length > 0) {
			var ctxDays = lineCanvas.getContext('2d');
			new Chart(ctxDays, {
				type: 'line',
				data: {
					labels: days,
					datasets: [{
						label: 'Reservations',
						data: reservationsPerDay,
						borderColor: 'rgba(75, 192, 192, 1)',
						backgroundColor: 'rgba(75, 192, 192, 0.2)',
						fill: true,
						tension: 0.4,
						borderWidth: 2,
						pointRadius: 4,
						pointHoverRadius: 6
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: true,
					plugins: {
						legend: {
							display: true,
							position: 'top'
						}
					},
					scales: {
						y: {
							beginAtZero: true,
							ticks: {
								stepSize: 1
							}
						}
					}
				}
			});
		} else {
			console.error('Line chart canvas not found or no data available');
		}
	});
</script>
			